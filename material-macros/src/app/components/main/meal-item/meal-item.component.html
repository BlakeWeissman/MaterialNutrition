<!-- {{item | json}} -->
<mat-card class="mat-elevation-z0">
    <mat-icon cdkDragHandle>drag_handle</mat-icon>
    <div *ngIf="userMealItems[item.type][item.key]; let userMealItem">
        <!-- <h2 class="mat-h2">{{userMealItem.label}}</h2> -->
        <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>Food</mat-label>
            <mat-select placeholder="Select food">
                <div id="search">
                    <mat-icon>
                        search
                    </mat-icon>
                    <input matInput placeholder="Search">
                </div>
                <mat-option>
                    Test
                </mat-option>
            </mat-select>
        </mat-form-field>
        <table class="mat-h4">
            <tr>
                <th>Calories</th>
                <th>Fat (g)</th>
                <th>Carbs (g)</th>
                <th>Protein (g)</th>
                <th>Total Amount ({{userMealItem.servingTypes[item.units].unit}})</th>
            </tr>
            <tr>
                <td>{{userMealItem.calories}}</td>
                <td>{{userMealItem.fat}}</td>
                <td>{{userMealItem.carbs}}</td>
                <td>{{userMealItem.protien}}</td>
                <td>{{item.servings * userMealItem.servingTypes[item.units].servingSize}}</td>
            </tr>
        </table> 
        <div>   
            <mat-form-field appearance="standard">
                <mat-label>Servings</mat-label>
                <input matInput [(ngModel)]="item.servings">
            </mat-form-field>
            <mat-form-field appearance="standard">
                <mat-label>Units</mat-label>
                <mat-select [(ngModel)]="item.units">
                    <mat-option *ngFor="let servingTypeKey of (userMealItem.servingTypes | objectKeys)" [value]="servingTypeKey">
                        <ng-container *ngIf="userMealItem.servingTypes[servingTypeKey]; let servingType">
                            {{servingType.label}} ({{servingType.unit}})
                        </ng-container>
                    </mat-option>
                </mat-select >
            </mat-form-field>
        </div>
    </div>
</mat-card>